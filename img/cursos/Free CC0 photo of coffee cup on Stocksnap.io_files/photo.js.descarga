$(document).on('click','.download-btn',function(e){$('#download-modal').modal('show');ga('send','event',{eventCategory:'photo download',eventAction:'click',eventLabel:window.location.pathname,eventValue:1});if(!navigator.cookieEnabled){alert('Please enable browser cookies to download photos.');e.preventDefault();return false;}});$(document).on('click','#credits-copy-btn',function(e){$('#copy-credits').select();document.execCommand('copy');$(this).text('Copied!');});$(document).on('click','.fav-btn',function(e){e.preventDefault();if(!navigator.cookieEnabled){alert('Please enable browser cookies to favorite photos.');return false;}
if($(this).hasClass('loading')){return false;}
var el=$(this);var imgId=$(this).attr('data-imgid');favoriteSinglePhoto(el,imgId);return false;});function favoriteSinglePhoto(el,imgId){el.addClass('disabled');var loadingCircle=setTimeout(function(){el.addClass('loading');},500);var addFav=true;if(el.hasClass('faved')){addFav=false;}
var favData={addAction:addFav,imgId:imgId,_csrf:$('meta[name="ctoken"]').attr('content')}
var ajaxPost=$.ajax({type:'POST',url:'/api/fav-action',data:$.param(favData),dataType:'json'});ajaxPost.fail(function(error){clearTimeout(loadingCircle);el.removeClass('loading');el.removeClass('disabled');if(error.status==401){var errorMsg='Please log in to remove photos from your favorites.';if(addFav){errorMsg='Please log in to add photos to your favorites.';}
$('#login-signup-modal .alert.error-msg').remove();$('#login-tab h3').after('<div class="alert alert-danger error-msg">'+errorMsg+'</div>');$('#login-signup-modal .tab-pane').removeClass('active');$('#login-signup-modal #login-tab').addClass('active');$('#login-signup-modal').modal('show');}
else{_showReqFailModal();}});ajaxPost.done(function(data){el.toggleClass('faved');clearTimeout(loadingCircle);el.removeClass('loading');el.removeClass('disabled');});}
$('.info-col .similar-photos a, .modal-body .similar-photos a').each(function(){var authorLink=$('#photo-by-credits a').attr('href').replace('https://stocksnap.io','');var currentHref=$(this).attr('href');$(this).attr('href',currentHref+'&subId2='+authorLink);});